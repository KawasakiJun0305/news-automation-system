# 要件定義書 - Requirements Document

## 📋 ドキュメント情報

```
プロジェクト名：Digest Daily
バージョン：1.0
作成日：2026-01-29
最終更新：2026-01-29
承認者：Jun（プロジェクトオーナー）
```

---

## 1️⃣ プロジェクト背景・目的

### 背景
マスメディアのニュースサイトが広告で溢れており、本当に必要な情報が埋もれている状況。

### 目的
**自分の興味に特化した、品質の高いニュースを、毎朝自動に取得・配信するシステムを構築する。**

### 期待効果
- ✅ 朝 6 時に自動で最新のニュースが届く
- ✅ 広告なし、自分の興味だけがフォーカスされている
- ✅ 重要度の高いニュースだけが表示される
- ✅ 複数ソースが統一フォーマットで提供される

---

## 2️⃣ ユーザー要件

### 2.1 ユーザー像

```
【プロファイル】
- 名前：Jun
- 職種：テック関心層・知的労働者
- 年齢：25-35 歳
- スキル：Python 初心者だが学習意欲高い
- デバイス：Windows PC + iPad
- 使用時間：毎朝 5-10 分
```

### 2.2 ユーザーニーズ

```
【主要ニーズ】
1. 朝のニュースをサッと確認したい
   → 毎朝 6 時に自動配信
   → iPad で 5 分で読める量

2. 質の高い情報だけが欲しい
   → スパム・低質記事を除外
   → スコアリングで重要度をランキング

3. 興味のある分野に特化したい
   → AI、決算、科学、モノづくり、ボードゲーム
   → 不要な分野は表示しない

4. 複数ソースをまとめて見たい
   → NewsAPI、RSS、EDINET など
   → 異なるフォーマットを統一

5. 技術を学びたい
   → このシステムで Python を学習
   → プロジェクト化して改造・拡張したい
```

---

## 3️⃣ 機能要件

### 3.1 主要機能

#### **機能 1：ニュース取得**

| 要件 ID | 要件 | 詳細 |
|--------|------|------|
| FR-1.1 | 複数ソースからの取得 | NewsAPI, RSS, EDINET, arXiv など |
| FR-1.2 | 複数キーワードでの検索 | AI, 決算, 科学, モノづくり, ボードゲーム |
| FR-1.3 | データの統一化 | 異なるソースを統一スキーマに正規化 |
| FR-1.4 | エラーハンドリング | 1 つのソースが落ちても他は継続 |

#### **機能 2：品質管理**

| 要件 ID | 要件 | 詳細 |
|--------|------|------|
| FR-2.1 | フィルタリング | スパム・低質記事を除外 |
| FR-2.2 | スコアリング | 重要度を 0-100 で数値化 |
| FR-2.3 | 重複排除 | 同じニュースの複数報道を統合 |
| FR-2.4 | ランキング | スコア順に整列 |

#### **機能 3：テキスト処理**

| 要件 ID | 要件 | 詳細 |
|--------|------|------|
| FR-3.1 | 要約生成 | Claude API で日本語要約（2-3 文） |
| FR-3.2 | キーワード抽出 | 記事から重要キーワードを自動抽出 |
| FR-3.3 | マルチ API 対応 | Claude/ChatGPT/Gemini を自動選択 |

#### **機能 4：出力**

| 要件 ID | 要件 | 詳細 |
|--------|------|------|
| FR-4.1 | HTML 生成 | 新聞風デザインの HTML を生成 |
| FR-4.2 | Markdown 生成 | Git で管理可能な Markdown ファイル |
| FR-4.3 | Notion 投稿 | Notion データベースに自動投稿 |
| FR-4.4 | GitHub Pages | HTML を自動で GitHub Pages に配置 |

#### **機能 5：自動実行**

| 要件 ID | 要件 | 詳細 |
|--------|------|------|
| FR-5.1 | 定時実行 | 毎朝 6 時（JST）に自動実行 |
| FR-5.2 | 無人実行 | PC を起動しなくても動作 |
| FR-5.3 | ログ出力 | 実行ログを保存 |

### 3.2 機能一覧表

```
優先度別機能リスト：

【必須 (MUST)】
- ニュース取得（NewsAPI）
- データ正規化
- Claude で要約生成
- HTML 生成
- GitHub Pages 配置
- 毎朝 6 時 自動実行

【重要 (SHOULD)】
- 複数キーワード対応（5 カテゴリ）
- スコアリング・フィルタリング
- 重複排除
- Markdown 出力
- Notion 投稿
- マルチ API ルーティング

【あると良い (NICE TO HAVE)】
- RSS フィード対応
- EDINET 対応
- arXiv 対応
- キャッシング機構
- レート制限管理
- ダッシュボード
```

---

## 4️⃣ 非機能要件

### 4.1 パフォーマンス

```
【実行時間】
- 全体処理：5-15 分以内に完了
- API 呼び出し：各 API < 30 秒
- HTML 生成：< 2 秒

【応答性】
- ニュース記事表示：< 3 秒

【スケーラビリティ】
- 記事数 1,000 件/日 まで対応
- 将来的に 10,000 件/日 対応可能な設計
```

### 4.2 信頼性・可用性

```
【信頼性】
- 正確性：要約の正確性 90% 以上
- エラー率：< 1%（致命的エラー）

【可用性】
- 稼働率：99% 以上（毎日実行成功）
- フェイルオーバー：1 つの API が落ちても継続

【復旧】
- RTO（復旧時間）：24 時間以内
- RPO（データ復旧）：1 日分のデータ
```

### 4.3 セキュリティ

```
【認証・認可】
- API キーは .env で管理
- GitHub Secrets で安全に保管

【データ保護】
- APIキーを Git にコミットしない
- 個人情報は含まない

【通信セキュリティ】
- HTTPS のみ（NewsAPI, Claude API など）
```

### 4.4 保守性・拡張性

```
【保守性】
- コメント率：関数に詳細 docstring
- テストカバレッジ：> 80%

【拡張性】
- 新しいニュースソース追加が容易
- 新しい LLM 追加が容易
- 出力形式追加が容易

【ドキュメント】
- Python 初心者が理解できるレベル
- トラブルシューティングガイド完備
```

### 4.5 環境・互換性

```
【対応 OS】
- Windows 10 / 11
- 将来：Linux / macOS

【言語】
- Python 3.9+

【ブラウザ】
- Safari（iPad）
- Chrome / Firefox（PC）

【データベース】
- SQLite（ローカル）
- 将来：PostgreSQL 対応可能
```

---

## 5️⃣ 制約条件

### 5.1 技術的制約

```
【API 制限】
- NewsAPI：100 リクエスト/日（無料版）
- Claude API：従量課金（推定月 ¥500-1,000）
- GitHub Actions：月 3,000 分まで無料

【環境】
- Windows PC 必須（開発時）
- インターネット接続必須
- 常時稼働不要（GitHub Actions で自動実行）

【データ](#容量】
- ローカルストレージ：100MB 以下（当面）
- HTML ファイル：毎日 1 つ生成（約 50KB）
```

### 5.2 運用的制約

```
【コスト】
- 月額 ¥500-1,000（API 代のみ）
- 無料 API を活用

【スケジュール】
- 開発期間：2-3 ヶ月
- 本番運用開始：開発完了後

【担当】
- 1 名（あなた）で全て対応
```

### 5.3 外部依存性

```
【外部サービス】
- NewsAPI（ニュース取得）
- Claude API（要約生成）
- GitHub（リポジトリ・Actions）
- Notion API（データベース）

【依存関係】
- これらのサービスが停止すると機能停止
```

---

## 6️⃣ 受け入れ基準

### 6.1 機能的受け入れ基準

```
以下の条件が満たされたら「完成」とする：

✅ 毎朝 6 時に自動実行される
✅ NewsAPI から 20+ 件の記事が取得できる
✅ Claude で要約が日本語で生成される
✅ HTML が新聞風デザインで表示される
✅ Markdown ファイルが生成される
✅ Notion に自動投稿される
✅ GitHub Pages で閲覧可能
✅ iPad Safari で見やすい
✅ テストが 80% 以上成功
✅ ドキュメントが完成
```

### 6.2 非機能的受け入れ基準

```
✅ 全処理が 15 分以内に完了
✅ エラーが起きても他のソースは継続
✅ API キーが安全に管理されている
✅ Python 初心者が理解できるコード
✅ 複数ソース追加が容易な設計
```

---

## 7️⃣ スコープ

### 7.1 スコープに含まれるもの

```
✅ ニュース自動取得・配信システム
✅ 5 つのカテゴリ（AI, 決算, 科学, モノづくり, ボードゲーム）
✅ 要約生成（Claude API）
✅ HTML + Markdown + Notion 出力
✅ GitHub Pages 自動配置
✅ GitHub Actions 自動実行
✅ テスト実装
✅ 技術ドキュメント
```

### 7.2 スコープに含まれないもの

```
❌ UI/UX デザイン（既定の新聞風で良い）
❌ ユーザー認証（個人用のため不要）
❌ 決済機能（マネタイズは将来）
❌ モバイルアプリ化（Web のみ）
❌ リアルタイム配信（毎朝 1 回）
❌ 複数言語対応（日本語のみ）
```

---

## 8️⃣ 変更管理

### 変更要求プロセス

```
変更要求 → 影響度評価 → 承認 → 実装 → テスト → 反映

【変更要求テンプレート】
- 内容：何を変えたいのか
- 理由：なぜ変える必要があるのか
- 影響：何に影響するのか
```

---

## 9️⃣ 用語定義

| 用語 | 定義 |
|------|------|
| **ニュース記事** | NewsAPI, RSS, EDINET などから取得したテキスト |
| **スコア** | 記事の重要度を 0-100 で数値化したもの |
| **正規化** | 複数ソースのデータを統一フォーマットに変換 |
| **要約** | Claude API で生成した 2-3 文の日本語抄録 |
| **キーワード** | 記事から抽出した重要な単語 |
| **フィルタリング** | 低品質・スパム記事を除外 |
| **デプロイ** | コードを GitHub Pages に反映させる |

---

## 🔟 署名・承認

```
プロジェクトオーナー：Jun
承認日：2026-01-29

確認事項：
☑ 要件内容に同意
☑ スケジュールに同意
☑ 非機能要件に同意
```

---

**この要件定義書に基づいて、開発を進めます！**
